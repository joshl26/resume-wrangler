@layer components {
  /* Theme variables for consistent styling */
  :root {
    --dropdown-bg: #ffffff;
    --dropdown-border: rgba(15, 23, 42, 0.06);
    --dropdown-text: #0f172a;
    --dropdown-hover-bg: #f1f5f9;
    --dropdown-shadow:
      0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
    --dropdown-focus-ring: rgba(99, 102, 241, 0.3);
  }

  html.dark {
    --dropdown-bg: #1e293b;
    --dropdown-border: rgba(255, 255, 255, 0.1);
    --dropdown-text: #f1f5f9;
    --dropdown-hover-bg: #334155;
    --dropdown-shadow:
      0 10px 15px -3px rgba(0, 0, 0, 0.3), 0 4px 6px -2px rgba(0, 0, 0, 0.1);
    --dropdown-focus-ring: rgba(99, 102, 241, 0.4);
  }

  /* Container */
  .dropdown-container {
    @apply relative w-full;
  }

  /* Main dropdown button */
  .dropdown-button {
    @apply flex items-center justify-between w-[175px] px-4 py-2.5 text-sm font-medium rounded-lg transition-all duration-200;
    background-color: var(--dropdown-bg);
    color: var(--dropdown-text);
    border: 1px solid var(--dropdown-border);
    box-shadow: var(--dropdown-shadow);
  }

  .dropdown-button:hover {
    background-color: var(--dropdown-hover-bg);
  }

  .dropdown-button:focus {
    @apply outline-none ring-2;
    ring-color: var(--dropdown-focus-ring);
  }

  /* Button text */
  .dropdown-button-text {
    @apply truncate;
  }

  /* Dropdown icon */
  .dropdown-icon {
    @apply w-2.5 h-2.5 ml-2 transition-transform duration-200;
  }

  .dropdown-icon.rotated {
    @apply rotate-180;
  }

  /* Dropdown menu */
  .dropdown-menu {
    @apply absolute right-0 z-30 mt-2 w-44 rounded-lg origin-top-right transition-all duration-200;
    background-color: var(--dropdown-bg);
    border: 1px solid var(--dropdown-border);
    box-shadow: var(--dropdown-shadow);
  }

  /* Dropdown list */
  .dropdown-list {
    @apply py-1;
    list-style: none;
  }

  /* Dropdown items */
  .dropdown-item {
    @apply block w-full px-4 py-2 text-left text-sm transition-colors duration-150;
    color: var(--dropdown-text);
  }

  .dropdown-item:hover {
    background-color: var(--dropdown-hover-bg);
  }

  .dropdown-item:focus {
    @apply outline-none;
    background-color: var(--dropdown-hover-bg);
    box-shadow: inset 0 0 0 2px var(--dropdown-focus-ring);
  }

  /* Responsive adjustments */
  @media (max-width: 640px) {
    .dropdown-button {
      @apply w-full;
    }

    .dropdown-menu {
      @apply w-full right-0;
    }
  }

  /* Animation for opening/closing */
  .dropdown-menu {
    animation: fadeIn 0.2s ease-out forwards;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-0.5rem);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }

  /* Reduced motion preference */
  @media (prefers-reduced-motion: reduce) {
    .dropdown-button,
    .dropdown-icon,
    .dropdown-menu {
      transition: none !important;
    }

    .dropdown-menu {
      animation: none;
    }
  }
}
